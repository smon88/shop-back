<section class="min-h-screen bg-[#f4f2f2] dark:bg-slate-900 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-screen-xl mx-auto">
    <!-- Header -->
    <div class="mb-8 text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">
        Nuestros Productos
      </h1>
      <p class="text-gray-600 dark:text-gray-400">
        Explora nuestra colecci칩n completa
      </p>
    </div>

    <!-- Products Info -->
    @if (!isLoading()) {
      <div class="mb-4 flex justify-between items-center">
        <p class="text-sm text-gray-600 dark:text-gray-400">
          Mostrando {{ (currentPage() - 1) * itemsPerPage() + 1 }} -
          {{ Math.min(currentPage() * itemsPerPage(), allProducts.length) }}
          de {{ allProducts.length }} productos
        </p>
        <p class="text-sm text-gray-600 dark:text-gray-400">
          P치gina {{ currentPage() }} de {{ totalPages() }}
        </p>
      </div>
    }

    <!-- Products Grid -->
    <article class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-8">
      @if (isLoading()) {
        <!-- Loading Skeletons -->
        @for (i of [1,2,3,4,5,6,7,8,9,10,11,12]; track i) {
          <app-home-product-loading />
        }
      } @else {
        <!-- Products -->
        @for (product of paginatedProducts(); track product.productId) {
          <app-products-list [product]="product" />
        }

        <!-- Empty State -->
        @if (paginatedProducts().length === 0) {
          <div class="col-span-full py-16 text-center">
            <svg class="mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
            </svg>
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">
              No hay productos disponibles
            </h3>
            <p class="text-gray-600 dark:text-gray-400">
              Vuelve m치s tarde para ver nuestros productos
            </p>
          </div>
        }
      }
    </article>

    <!-- Pagination -->
    @if (!isLoading() && totalPages() > 1) {
      <nav class="flex items-center justify-center gap-2 mt-8">
        <!-- Previous Button -->
        <button
          (click)="previousPage()"
          [disabled]="currentPage() === 1"
          class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          <span class="hidden sm:inline">Anterior</span>
        </button>

        <!-- Page Numbers -->
        <div class="flex items-center gap-1">
          <!-- First page if not in range -->
          @if (getPageNumbers()[0] > 1) {
            <button
              (click)="goToPage(1)"
              class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-all duration-300"
            >
              1
            </button>
            @if (getPageNumbers()[0] > 2) {
              <span class="px-2 text-gray-500 dark:text-gray-400">...</span>
            }
          }

          <!-- Page number buttons -->
          @for (page of getPageNumbers(); track page) {
            <button
              (click)="goToPage(page)"
              [class.bg-[#06cf86]]="currentPage() === page"
              [class.text-white]="currentPage() === page"
              [class.border-[#06cf86]]="currentPage() === page"
              [class.bg-white]="currentPage() !== page"
              [class.dark:bg-slate-800]="currentPage() !== page"
              [class.text-gray-700]="currentPage() !== page"
              [class.dark:text-gray-200]="currentPage() !== page"
              [class.border-gray-300]="currentPage() !== page"
              [class.dark:border-slate-700]="currentPage() !== page"
              class="px-3 py-2 text-sm font-medium border rounded-lg hover:bg-[#06cf86] hover:text-white hover:border-[#06cf86] transition-all duration-300"
            >
              {{ page }}
            </button>
          }

          <!-- Last page if not in range -->
          @if (getPageNumbers()[getPageNumbers().length - 1] < totalPages()) {
            @if (getPageNumbers()[getPageNumbers().length - 1] < totalPages() - 1) {
              <span class="px-2 text-gray-500 dark:text-gray-400">...</span>
            }
            <button
              (click)="goToPage(totalPages())"
              class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-all duration-300"
            >
              {{ totalPages() }}
            </button>
          }
        </div>

        <!-- Next Button -->
        <button
          (click)="nextPage()"
          [disabled]="currentPage() === totalPages()"
          class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
        >
          <span class="hidden sm:inline">Siguiente</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </nav>

      <!-- Mobile Pagination Info -->
      <div class="text-center mt-4 sm:hidden">
        <p class="text-sm text-gray-600 dark:text-gray-400">
          P치gina {{ currentPage() }} de {{ totalPages() }}
        </p>
      </div>
    }
  </div>
</section>