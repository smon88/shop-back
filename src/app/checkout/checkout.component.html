<main class="bg-[#f4f2f2] py-8 antialiased md:py-3">
  <section class="mx-auto max-w-screen-xl px-4 2xl:px-0">
    <div class="mt-6 sm:mt-8 md:gap-6 lg:flex lg:items-start xl:gap-8">
      <!-- COLUMNA IZQUIERDA: FORMULARIO -->
      <div class="mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl">
        <form class="space-y-8">
          <!-- Información de contacto -->
          <div class="space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6">
            <h3 class="text-lg font-semibold text-gray-900">
              Información de contacto
            </h3>
            <p class="text-sm text-gray-500">
              Usa un correo y válido para recibir la confirmación del pedido.
            </p>

            <div class="grid gap-4 md:grid-cols-2">
              <div class="md:col-span-2">
                <label
                  for="contactEmail"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Correo electrónico*
                </label>
                <input
                  type="email"
                  id="contactEmail"
                  name="contactEmail"
                  [(ngModel)]="contact.email"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  placeholder="correo@correo.com"
                  required
                />
              </div>

             
            </div>
          </div>

          <!-- Dirección de facturación -->
          <div class="space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6">
            <h3 class="text-lg font-semibold text-gray-900">
              Dirección de facturación
            </h3>

            <div class="grid gap-4 md:grid-cols-2">
              <div>
                <label
                  for="billingFirstName"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Nombre*
                </label>
                <input
                  type="text"
                  id="billingFirstName"
                  name="billingFirstName"
                  [(ngModel)]="billing.firstName"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>

              <div>
                <label
                  for="billingLastName"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Apellido*
                </label>
                <input
                  type="text"
                  id="billingLastName"
                  name="billingLastName"
                  [(ngModel)]="billing.lastName"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>

              <div>
                <label
                  for="billingDocument"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Documento de identidad*
                </label>
                <input
                  type="text"
                  id="billingDocument"
                  name="billingDocument"
                  [(ngModel)]="billing.document"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>

              <div>
                <label
                  for="billingPhone"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Teléfono*
                </label>
                <input
                  type="tel"
                  id="billingPhone"
                  name="billingPhone"
                  [(ngModel)]="billing.phone"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>

              <div>
                <label
                  for="billingCountry"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  País*
                </label>
                <input
                  type="text"
                  id="billingCountry"
                  name="billingCountry"
                  [(ngModel)]="billing.country"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  placeholder="Colombia"
                  required
                />
              </div>

              <div>
                <label
                  for="billingCity"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Ciudad*
                </label>
                <input
                  type="text"
                  id="billingCity"
                  name="billingCity"
                  [(ngModel)]="billing.city"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>

              <div class="md:col-span-2">
                <label
                  for="billingAddress"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Dirección*
                </label>
                <input
                  type="text"
                  id="billingAddress"
                  name="billingAddress"
                  [(ngModel)]="billing.address"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  placeholder="Calle 00 # 00 - 00"
                  required
                />
              </div>

              <div class="md:col-span-2">
                <label
                  for="billingEmail"
                  class="mb-2 block text-sm font-medium text-gray-900"
                >
                  Email de facturación*
                </label>
                <input
                  type="email"
                  id="billingEmail"
                  name="billingEmail"
                  [(ngModel)]="billing.email"
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                  required
                />
              </div>
            </div>
          </div>

          <!-- Checkbox: Enviar a una dirección diferente -->
          <div class="space-y-3 rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6">
            <div class="flex items-center gap-3">
              <input
                id="shipToDifferentAddress"
                type="checkbox"
                name="shipToDifferentAddress"
                [(ngModel)]="shipToDifferentAddress"
                class="h-4 w-4 rounded border-gray-300 text-[#06cf86] focus:ring-[#06cf86]"
              />
              <label
                for="shipToDifferentAddress"
                class="text-sm font-medium text-gray-900"
              >
                Enviar a una dirección diferente
              </label>
            </div>

            @if (shipToDifferentAddress) {
              <div class="mt-4 space-y-4">
                <h3 class="text-lg font-semibold text-gray-900">
                  Dirección de envío*
                </h3>

                <div class="grid gap-4 md:grid-cols-2">
                  <div>
                    <label
                      for="shippingFirstName"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Nombre*
                    </label>
                    <input
                      type="text"
                      id="shippingFirstName"
                      name="shippingFirstName"
                      [(ngModel)]="shipping.firstName"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>

                  <div>
                    <label
                      for="shippingLastName"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Apellido*
                    </label>
                    <input
                      type="text"
                      id="shippingLastName"
                      name="shippingLastName"
                      [(ngModel)]="shipping.lastName"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>

                  <div>
                    <label
                      for="shippingDocument"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Documento de identidad*
                    </label>
                    <input
                      type="text"
                      id="shippingDocument"
                      name="shippingDocument"
                      [(ngModel)]="shipping.document"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>

                  <div>
                    <label
                      for="shippingPhone"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Teléfono*
                    </label>
                    <input
                      type="tel"
                      id="shippingPhone"
                      name="shippingPhone"
                      [(ngModel)]="shipping.phone"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>

                  <div>
                    <label
                      for="shippingCountry"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      País*
                    </label>
                    <input
                      type="text"
                      id="shippingCountry"
                      name="shippingCountry"
                      [(ngModel)]="shipping.country"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      placeholder="Colombia"
                      required
                    />
                  </div>

                  <div>
                    <label
                      for="shippingCity"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Ciudad*
                    </label>
                    <input
                      type="text"
                      id="shippingCity"
                      name="shippingCity"
                      [(ngModel)]="shipping.city"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>

                  <div class="md:col-span-2">
                    <label
                      for="shippingAddress"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Dirección*
                    </label>
                    <input
                      type="text"
                      id="shippingAddress"
                      name="shippingAddress"
                      [(ngModel)]="shipping.address"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      placeholder="Calle 00 # 00 - 00"
                      required
                    />
                  </div>

                  <div class="md:col-span-2">
                    <label
                      for="shippingEmail"
                      class="mb-2 block text-sm font-medium text-gray-900"
                    >
                      Email de envío*
                    </label>
                    <input
                      type="email"
                      id="shippingEmail"
                      name="shippingEmail"
                      [(ngModel)]="shipping.email"
                      class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#06cf86] focus:ring-[#06cf86]"
                      required
                    />
                  </div>
                </div>
              </div>
            }
          </div>
        </form>
      </div>

      <!-- COLUMNA DERECHA: RESUMEN -->
      <div class="mx-auto mt-6 max-w-4xl flex-1 space-y-6 lg:mt-0 lg:w-full">
        <div
          class="space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6"
        >
          <p class="text-xl font-semibold text-gray-900">Resumen del pedido</p>

          <div class="space-y-4">
            <dl
              class="flex items-center justify-between gap-4 border-t border-gray-200 pt-2"
            >
              <dt class="text-base font-bold text-gray-900">Total</dt>
              <dd class="text-base font-bold text-gray-900">
                {{ total | currency }}
              </dd>
            </dl>
          </div>

          <button
            (click)="onProceedToCheckout()"
            class="flex w-full items-center justify-center rounded-lg bg-gradient-to-tl from-[#06cf86] to-[#0b6142] px-5 py-2.5 text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-[#06cf86]"
          >
            Ir a Pagar
          </button>

          <div class="flex items-center justify-center gap-2">
            <span class="text-sm font-normal text-gray-500"> ó </span>
            <a
              routerLink="/"
              class="inline-flex items-center gap-2 text-sm font-medium text-[#06cf86] underline hover:no-underline"
            >
              Seguir comprando
              <svg
                class="h-5 w-5"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 12H5m14 0-4 4m4-4-4-4"
                />
              </svg>
            </a>
          </div>
        </div>

        
      </div>
    </div>
  </section>
</main>

@if (showErrorToast) {
  <div
    id="toast-danger"
    class="fixed right-5 bottom-5 flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow"
    role="alert"
  >
    <div
      class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg"
    >
      <svg
        class="w-5 h-5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"
        />
      </svg>
      <span class="sr-only">Error icon</span>
    </div>
    <div class="ms-3 text-sm font-normal">
      Por favor ingresa todos los datos requeridos.
    </div>
    <button
      (click)="showErrorToast = false"
      type="button"
      class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8"
      aria-label="Close"
    >
      <span class="sr-only">Close</span>
      <svg
        class="w-3 h-3"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
        />
      </svg>
    </button>
  </div>
}
